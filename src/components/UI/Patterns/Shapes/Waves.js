import React from "react";
import { animated } from "react-spring";

import { Stripes, Gradient, Texture } from "./Defs";
import ConditionalWrapper from "../../../../hoc/Utility/ConditionalWrapper";
import { clampedInterpolation as interp } from "../../Animations/clampedInterpolation";

const Waves = ({
  animatedValue,
  width,
  height,
  x,
  y,
  layer,
  color,
  texture,
  stripes,
  uid
}) => {
  const wavePath1 = [
    "M0 142L9.33333 151.362C18.6667 160.375 37.3333 179.625 56 184C74.6667 188.375 93.3333 179.625 112 170C130.667 160.375 149.333 151.625 168 160.638C186.667 170 205.333 198 224 193.362C242.667 188.375 261.333 151.625 270.667 132.638L280 114V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V142Z",
    "M0 122L9.33333 148.354C18.6667 174.461 37.3333 184.539 56 177.75C74.6667 170.961 93.3333 148.539 112 135.146C130.667 122 149.333 161.5 168 174.646C186.667 188.039 205.333 174.461 224 181.25C242.667 188.039 261.333 213.961 270.667 227.354L280 240.5V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V122Z",
    "M0 226L9.33333 212C18.6667 198 37.3333 170 56 165.362C74.6667 160.375 93.3333 179.625 112 188.637C130.667 198 149.333 198 168 184C186.667 170 205.333 142 224 137.362C242.667 132.375 261.333 151.625 270.667 160.637L280 170V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V226Z",
    "M0 161.6L9.33333 159.712C18.6667 157.681 37.3333 154.119 56 161.6C74.6667 169.081 93.3333 188.319 112 186.288C130.667 184.4 149.333 161.6 168 161.6C186.667 161.6 205.333 184.4 224 180.588C242.667 176.919 261.333 166.281 270.667 151.212L280 136V278.6H270.667C261.333 278.6 242.667 278.6 224 278.6C205.333 278.6 186.667 278.6 168 278.6C149.333 278.6 130.667 278.6 112 278.6C93.3333 278.6 74.6667 278.6 56 278.6C37.3333 278.6 18.6667 278.6 9.33333 278.6H0V161.6Z"
  ];

  const wavePath2 = [
    "M0 200L9.33333 213.35C18.6667 226.5 37.3333 233.5 56 228C74.6667 222.5 93.3333 205.5 112 189.35C130.667 173.5 149.333 178.5 168 189.35C186.667 200 205.333 216 224 221.35C242.667 226.5 261.333 221.5 270.667 218.65L280 216V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V200Z",
    "M0 219.851L9.33333 216.53C18.6667 212.959 37.3333 206.693 56 189.776C74.6667 172.86 93.3333 146.544 112 152.998C130.667 159.702 149.333 199.801 168 206.505C186.667 212.959 205.333 186.644 224 183.072C242.667 179.752 261.333 199.801 270.667 209.826L280 219.851V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V219.851Z",
    "M0 184L9.33333 195.443C18.6667 206.714 37.3333 229.857 56 234.271C74.6667 238.857 93.3333 225.143 112 211.429C130.667 197.714 149.333 184 168 190.857C186.667 197.714 205.333 225.143 224 227.414C242.667 229.857 261.333 206.714 270.667 195.443L280 184V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V184Z",
    "M0 225.333L9.33333 218.5C18.6667 211.667 37.3333 198 56 198C74.6667 198 93.3333 211.667 112 225.333C130.667 239 149.333 252.667 168 245.833C186.667 239 205.333 211.667 224 202.57C242.667 193.302 261.333 202.698 270.667 207.097L280 211.667V280H270.667C261.333 280 242.667 280 224 280C205.333 280 186.667 280 168 280C149.333 280 130.667 280 112 280C93.3333 280 74.6667 280 56 280C37.3333 280 18.6667 280 9.33333 280H0V225.333Z"
  ];

  const interpWaves1 = interp(animatedValue, wavePath1);
  const interpWaves2 = interp(animatedValue, wavePath2);

  return (
    <div
      style={{
        position: "absolute",

        left: x,
        bottom: y,
        width: width,
        height: height,
        zIndex: layer
      }}
    >
      <svg
        viewBox="0 0 280 280"
        preserveAspectRatio="none"
        xmlns="http://www.w3.org/2000/svg"
        margin="auto"
        position="absolute"
        display="block"
        bottom="0"
        width="100%"
        height="100%"
      >
        <defs>
          <Gradient />
          {texture && <Texture id={uid} style={texture} />}
          {stripes && <Stripes id={uid} {...stripes} />}
          <mask
            id={`${uid}waveMask`}
            maskUnits="userSpaceOnUse"
            maskContentUnits="userSpaceOnUse"
          >
            <ConditionalWrapper
              wrapper={children => (
                <g mask={`url(#${uid}StripeMask)`}>{children}</g>
              )}
              condition={stripes}
            >
              <animated.path d={interpWaves1} fill="url(#gradient)" />
              <animated.path d={interpWaves2} fill="url(#gradient)" />
            </ConditionalWrapper>
          </mask>
        </defs>

        <g mask={`url(#${uid}waveMask)`}>
          <rect
            mask={texture && `url(#${uid}texture)`}
            fill={color ? color : "var(--primary)"}
            width="100%"
            height="100%"
          />
        </g>
      </svg>
    </div>
  );
};

export default Waves;
